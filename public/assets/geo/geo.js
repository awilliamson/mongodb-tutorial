$(document).ready(function(){function e(){var e=$(window).height()-$("#menu").height()-i.height()-30;$("#results").height(e-$("#history").height()-10),$("#input").width(document.body.clientWidth-30),$("#results").width(document.body.clientWidth-425)}grid.initialize($("#location"));var t=$("#history"),i=$("#input").commandInput({trigger:executor.execute,history:t}),t=t.inputHistory({target:i});$("#pager").pager({}),$(window).resize(e),e(),$("#speed").click(function(){$("#speedChoice").toggle()}),$("#speedChoice li").click(function(){teacher.changeSpeed($(this).text()),$("#speedChoice").hide()})});var grid={$table:null,$cells:null,initialize:function(e){grid.$table=e,grid.buildGrid(),grid.$cells=e.find("td"),e.delegate("td","mouseenter",grid.tdMouseEnter).delegate("td","mouseleave",grid.tdMouseLeave)},buildGrid:function(){for(var e=grid.$table[0],t=0;50>t;++t)for(var i=e.insertRow(0),n=0;50>n;++n)i.insertCell(0)},tdMouseEnter:function(){var e=$(this).addClass("active");grid.$cells.index(e)},tdMouseLeave:function(){$(this).removeClass("active")},highlight:function(e,t){var i=grid.locationToIndex(e),n=grid.$cells.filter(":eq("+i+")");n.animate({backgroundColor:t},500,function(){n.animate({backgroundColor:"#fff"},500,function(){n.animate({backgroundColor:t},500,function(){n.animate({backgroundColor:"#fff"},500,function(){n.animate({backgroundColor:t},500)})})})})},locationToIndex:function(e){return e[0]+25+50*(e[1]+25)},indexToLocation:function(e){var t=Math.floor(e/50)-25,i=e%50-25;return i+","+t},clear:function(){grid.$cells.css("backgroundColor","")},displayResults:function(e){grid.$cells.removeClass("gold silver copper coal");for(var t=0;t<e.length;++t){var i=e[t],n=grid.locationToIndex([i.location.x,i.location.y]);$(grid.$cells[n]).addClass(i.type)}}};